@media not (-moz-pref("neo-features-disabled")) {
    @media not (-moz-pref("neo-features-media-disabled")) {
        :root:not([zen-sidebar-expanded="true"]) {

            #zen-media-controls-toolbar:not([hidden]),
            #zen-media-controls-toolbar:not([hidden])>toolbaritem {
                display: flex !important;
            }

            #zen-media-controls-toolbar {
                justify-content: center !important;
                align-content: center !important;
                padding-bottom: 5px !important;
                order: 9999 !important;
                z-index: 99999 !important;

                &[media-sharing=""] {
                    & #media-device-buttons {
                        display: flex !important;
                        flex-direction: column !important;
                        position: relative !important;
                        /* Centering media sharing buttons */
                        justify-items: center !important;
                        align-items: stretch !important;
                        height: fit-content !important;
                    }
                }
            }

            #zen-media-controls-toolbar>toolbaritem {
                flex-direction: column !important;
                position: absolute !important;
                justify-items: center !important;
                align-items: stretch !important;
                justify-content: center !important;
                align-content: center !important;

                width: fit-content !important;

                left: auto !important;

                min-height: unset !important;
                height: 30px !important;

                background: transparent !important;
                box-shadow: 0px 0px 0px var(--Neo-Shadow-Color-1) !important;
                backdrop-filter: blur(0px) !important;

                padding: 5px 7px !important;

                /* Optimized: Reduced expensive properties, added will-change and contain */
                will-change: transform, background, filter;
                contain: layout style;
                transition: height 1s ease, background 1s ease !important;

                /* Disable expensive effects on reduced motion preference */
                @media (prefers-reduced-motion: no-preference) {
                    transition: height 1s ease, background 1s ease, backdrop-filter 0.3s ease !important;
                }

                /* Hide media progress bar */
                & #zen-media-progress-hbox {
                    display: none !important;
                }

                /* Hide media info */
                & #zen-media-info-vbox {
                    display: none !important;
                }

                & #zen-media-controls-hbox {
                    display: flex !important;
                    flex-direction: column !important;
                    justify-items: center !important;
                    align-items: stretch !important;
                    order: -1 !important;
                }

                & #zen-media-buttons-hbox {
                    display: flex !important;
                    flex-direction: column !important;
                    position: relative !important;

                    justify-items: center !important;
                    align-items: stretch !important;
                    justify-self: center !important;
                    align-self: center !important;

                    margin: 0px 0px !important;
                    padding: 0px 0px !important;
                    transform: none !important;
                }

                & #zen-media-focus-button {
                    display: flex !important;
                }

                & #zen-media-playback-buttons {
                    display: flex !important;
                    flex-direction: column !important;
                    position: relative !important;

                    margin: 0px 0px !important;
                    padding: 0px 0px !important;
                    transform: none !important;
                }

                & .show-on-hover {
                    display: flex !important;
                    position: relative !important;
                    padding: 0px 0px !important;
                    transform: none !important;
                    top: unset !important;
                    bottom: unset !important;

                    min-height: fit-content !important;
                    max-height: unset !important;
                    margin: 0px 0px !important;

                    opacity: 1 !important;
                }
            }

            #zen-media-controls-toolbar:not([hidden]):hover {
                &>toolbaritem {
                    height: 210px !important;
                    background: var(--Neo-Blur-Color) !important;
                    backdrop-filter: var(--Neo-Blur-Simple) !important;
                    box-shadow: 0px 0px 5px var(--Neo-Shadow-Color-1) !important;
                }
            }
        }
    }
}